(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{el9i:function(e,t,n){"use strict";n.r(t);n("14J3");var a=n("BMrR"),r=(n("jCWc"),n("kPKH")),l=(n("IzEo"),n("bx4M")),c=(n("g9YV"),n("wCAj")),s=n("d6i3"),i=n.n(s),o=n("1l/V"),m=n.n(o),u=n("2Taf"),d=n.n(u),p=n("vZ4D"),f=n.n(p),E=n("l4Ni"),h=n.n(E),C=n("ujKo"),y=n.n(C),v=n("MhPg"),x=n.n(v),I=n("q1tI"),N=n.n(I),k=n("y1Nh"),w=n("MuoO"),L=n("+n12"),g=n("3a4m"),T=n.n(g),M=n("iJd5"),G=n("Yv72"),O=(n("HUA2"),n("XfOM")),A=n.n(O),S=function(e){function t(e){var n;return d()(this,t),(n=h()(this,y()(t).call(this,e))).onFetchCredentialsList=function(){(0,n.props.dispatch)({type:"system/credentialsList"})},n.onFetchClusterComponents=function(){(0,n.props.dispatch)({type:"system/clusterComponents",payload:{clusterName:"系统集群"}})},n.onEdit=function(e){n.setState({showGitModal:!0,currentItem:e})},n.onGitCancel=function(){n.setState({showGitModal:!1,currentItem:{}})},n.onAddGitCredentials=function(){var e=m()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.onGitCancel(),n.onFetchCredentialsList();case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.onToHref=function(e){var t=Object(L.h)(e.url);"MLB"==e.name&&(t=Object(L.h)(e.url)+":9090/haproxy?stats"),window.open(t)},n.state={showGitModal:!1,currentItem:{}},n}return x()(t,e),f()(t,[{key:"componentDidMount",value:function(){Object(L.f)()?(this.onFetchCredentialsList(),this.onFetchClusterComponents()):T.a.replace("/exception403")}},{key:"renderCredentialsList",value:function(){var e=this,t=this.props,n=t.credentialsList,a=t.loading,r=[{title:"名称",dataIndex:"credentialName"},{title:"类型",dataIndex:"domain",render:function(e,t){return N.a.createElement("span",null,"GIT_SERVER"===e?"代码仓库凭据":"镜像库凭据")}},{title:"使用域",dataIndex:"scope",render:function(e){return N.a.createElement("span",null,"GLOBAL"==e?"全局":"")}},{title:"凭据类别",dataIndex:"credentialType",render:function(e,t){return N.a.createElement("span",null,"USERNAME_WITH_PASSWORD"===e?"用户名/密码":"")}},{title:"值",dataIndex:"credentialValue",render:function(e,t){return N.a.createElement("span",null,t.credentialKey,"/",e)}},{title:"操作",dataIndex:"opera",render:function(t,n){return N.a.createElement("span",null,N.a.createElement("a",{onClick:function(){e.onEdit(n)}},"修改"))}}];return N.a.createElement(l.a,{title:"凭据",className:A.a.marginT},N.a.createElement(c.a,{columns:r,dataSource:n||[],loading:a,pagination:!1,rowKey:function(e){return e.id}}))}},{key:"renderSystemInfo",value:function(){return N.a.createElement(l.a,{title:"系统基础信息"},N.a.createElement(a.a,{type:"flex",align:"middle"},N.a.createElement(r.a,{md:7,sm:24},N.a.createElement("div",{className:A.a.flexCenter},N.a.createElement("p",{className:"".concat(A.a.textBlack," ").concat(A.a.stystemInfoTitle)},"项目："),N.a.createElement("p",null,"上海彩亿信息技术有限公司"))),N.a.createElement(r.a,{md:7,sm:24},N.a.createElement("div",{className:A.a.flexCenter},N.a.createElement("p",{className:"".concat(A.a.textBlack," ").concat(A.a.stystemInfoTitle)},"版本："),N.a.createElement("p",null,"0.2.1"))),N.a.createElement(r.a,{md:7,sm:0}),N.a.createElement(r.a,{md:7,sm:24},N.a.createElement("div",{className:A.a.flexCenter},N.a.createElement("p",{className:"".concat(A.a.textBlack," ").concat(A.a.stystemInfoTitle)},"安装方案："),N.a.createElement("p",null,"本地集群安装"))),N.a.createElement(r.a,{md:7,sm:24},N.a.createElement("div",{className:A.a.flexCenter},N.a.createElement("p",{className:"".concat(A.a.textBlack," ").concat(A.a.stystemInfoTitle)},"发布时间："),N.a.createElement("p",null,"2019-06-10"))),N.a.createElement(r.a,{md:7,sm:0})))}},{key:"renderComponent",value:function(){var e=this,t=this.props.clusterComponents.clusterComponents||[];return N.a.createElement(l.a,{title:"ATCLOUD系统服务组件",className:A.a.marginT},N.a.createElement(a.a,{type:"flex",align:"middle"},t.map(function(t,n){return N.a.createElement(r.a,{md:7,key:n,sm:12},N.a.createElement("div",{className:"".concat(A.a.flexCenter)},t.status&&M.c[t.status]&&N.a.createElement("p",{className:A.a[M.c[t.status].style],style:{marginLeft:0,minWidth:10}}),"镜像库"==t.name||"AtaCloud"==t.name?N.a.createElement("p",null,t.name):N.a.createElement("p",null,N.a.createElement("a",{onClick:function(){e.onToHref(t)}},t.name)),N.a.createElement("p",null," （"),N.a.createElement("p",{className:A.a.textOverflow},"版本：",t.version),N.a.createElement("p",null,"）")))})))}},{key:"render",value:function(){var e=this.state,t=e.showGitModal,n=e.currentItem;return N.a.createElement(k.PageHeaderWrapper,{content:"系统基础信息、组件状态和凭据管理"},this.renderSystemInfo(),this.renderComponent(),this.renderCredentialsList(),t&&N.a.createElement(G.a,{visible:t,onCancel:this.onGitCancel,onOk:this.onAddGitCredentials,currentItem:n}))}}]),t}(N.a.Component);t.default=Object(w.connect)(function(e){var t=e.system,n=e.loading;return{credentialsList:t.credentialsList,clusterComponents:t.clusterComponents,loading:n.effects["system/credentialsList"]}})(S)}}]);