(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{el9i:function(e,t,n){"use strict";n.r(t);n("14J3");var a=n("BMrR"),r=(n("jCWc"),n("kPKH")),l=(n("IzEo"),n("bx4M")),c=(n("g9YV"),n("wCAj")),s=n("d6i3"),i=n.n(s),o=(n("miYZ"),n("tsqr")),m=n("p0pE"),d=n.n(m),u=n("1l/V"),p=n.n(u),E=n("2Taf"),f=n.n(E),h=n("vZ4D"),C=n.n(h),y=n("l4Ni"),v=n.n(y),x=n("ujKo"),I=n.n(x),N=n("MhPg"),k=n.n(N),w=n("q1tI"),L=n.n(w),g=n("y1Nh"),G=n("MuoO"),M=n("+n12"),A=n("3a4m"),O=n.n(A),T=n("iJd5"),S=n("Yv72"),K=n("HUA2"),b=n("XfOM"),V=n.n(b),j=function(e){function t(e){var n;return f()(this,t),(n=v()(this,I()(t).call(this,e))).onFetchCredentialsList=function(){(0,n.props.dispatch)({type:"system/credentialsList"})},n.onFetchClusterComponents=function(){(0,n.props.dispatch)({type:"system/clusterComponents",payload:{clusterName:"系统集群"}})},n.onEdit=function(e){n.setState({showGitModal:!0,currentItem:e})},n.onGitCancel=function(){n.setState({showGitModal:!1,currentItem:{}})},n.onAddGitCredentials=function(){var e=p()(i.a.mark(function e(t){var a,r,l;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.state.currentItem,r={credentialKey:t.credentialKey,credentialValue:t.credentialValue},"******"==t.credentialValue&&(r={credentialKey:t.credentialKey}),e.next=5,K.a.credentialsUpdate(d()({id:a.id},r));case 5:(l=e.sent)&&"1"==l.code&&(o.a.success("修改成功"),n.onGitCancel(),n.onFetchCredentialsList());case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.onToHref=function(e){var t=Object(M.h)(e);window.open(t)},n.state={showGitModal:!1,currentItem:{}},n}return k()(t,e),C()(t,[{key:"componentDidMount",value:function(){Object(M.f)()?(this.onFetchCredentialsList(),this.onFetchClusterComponents()):O.a.replace("/exception403")}},{key:"renderCredentialsList",value:function(){var e=this,t=this.props,n=t.credentialsList,a=t.loading,r=[{title:"名称",dataIndex:"credentialName"},{title:"类型",dataIndex:"domain",render:function(e,t){return L.a.createElement("span",null,"GIT_SERVER"===e?"代码仓库凭据":"镜像库凭据")}},{title:"使用域",dataIndex:"scope",render:function(e){return L.a.createElement("span",null,"GLOBAL"==e?"全局":"")}},{title:"凭据类别",dataIndex:"credentialType",render:function(e,t){return L.a.createElement("span",null,"USERNAME_WITH_PASSWORD"===e?"用户名/密码":"")}},{title:"值",dataIndex:"credentialValue",render:function(e,t){return L.a.createElement("span",null,t.credentialKey,"/",e)}},{title:"操作",dataIndex:"opera",render:function(t,n){return L.a.createElement("span",null,L.a.createElement("a",{onClick:function(){e.onEdit(n)}},"修改"))}}];return L.a.createElement(l.a,{title:"凭据",className:V.a.marginT},L.a.createElement(c.a,{columns:r,dataSource:n||[],loading:a,pagination:!1,rowKey:function(e){return e.id}}))}},{key:"renderSystemInfo",value:function(){return L.a.createElement(l.a,{title:"系统基础信息"},L.a.createElement(a.a,{type:"flex",align:"middle"},L.a.createElement(r.a,{md:7,sm:24},L.a.createElement("div",{className:V.a.flexCenter},L.a.createElement("p",{className:V.a.textBlack},"公司："),L.a.createElement("p",null,"上海彩亿信息技术有限公司"))),L.a.createElement(r.a,{md:7,sm:24},L.a.createElement("div",{className:V.a.flexCenter},L.a.createElement("p",{className:V.a.textBlack},"ATA cloud版本："),L.a.createElement("p",null,"0.2.1"))),L.a.createElement(r.a,{md:7,sm:0}),L.a.createElement(r.a,{md:7,sm:24},L.a.createElement("div",{className:V.a.flexCenter},L.a.createElement("p",{className:V.a.textBlack},"安装方案："),L.a.createElement("p",null,"本地集群安装"))),L.a.createElement(r.a,{md:7,sm:24},L.a.createElement("div",{className:V.a.flexCenter},L.a.createElement("p",{className:V.a.textBlack},"安装时间："),L.a.createElement("p",null,"2019-06-10"))),L.a.createElement(r.a,{md:7,sm:0})))}},{key:"renderComponent",value:function(){var e=this,t=this.props.clusterComponents.clusterComponents||[];return L.a.createElement(l.a,{title:"ATCLOUD系统服务组件",className:V.a.marginT},L.a.createElement(a.a,{type:"flex",align:"middle"},t.map(function(t,n){return L.a.createElement(r.a,{md:7,key:n,sm:12},L.a.createElement("div",{className:"".concat(V.a.flexCenter)},t.status&&T.c[t.status]&&L.a.createElement("p",{className:V.a[T.c[t.status].style],style:{marginLeft:0,minWidth:10}}),L.a.createElement("p",null,L.a.createElement("a",{onClick:function(){e.onToHref(t.url)}},t.name)),L.a.createElement("p",null," （"),L.a.createElement("p",{className:V.a.textOverflow},"版本：",t.version),L.a.createElement("p",null,"）")))})))}},{key:"render",value:function(){var e=this.state,t=e.showGitModal,n=e.currentItem;return L.a.createElement(g.PageHeaderWrapper,null,this.renderSystemInfo(),this.renderComponent(),this.renderCredentialsList(),t&&L.a.createElement(S.a,{visible:t,onCancel:this.onGitCancel,onOk:this.onAddGitCredentials,currentItem:n}))}}]),t}(L.a.Component);t.default=Object(G.connect)(function(e){var t=e.system,n=e.loading;return{credentialsList:t.credentialsList,clusterComponents:t.clusterComponents,loading:n.effects["system/credentialsList"]}})(j)}}]);