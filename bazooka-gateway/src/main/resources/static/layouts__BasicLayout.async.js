(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{G3lK:function(e,t,n){e.exports={headerSearch:"antd-pro-components-header-search-index-headerSearch",input:"antd-pro-components-header-search-index-input",show:"antd-pro-components-header-search-index-show"}},"O/iA":function(e,t,n){e.exports={"ant-select-auto-complete":"ant-select-auto-complete","ant-select":"ant-select","ant-select-selection":"ant-select-selection","ant-select-selection__rendered":"ant-select-selection__rendered","ant-select-selection__placeholder":"ant-select-selection__placeholder","ant-select-selection--single":"ant-select-selection--single","ant-select-search--inline":"ant-select-search--inline","ant-select-allow-clear":"ant-select-allow-clear","ant-input":"ant-input","ant-select-lg":"ant-select-lg","ant-select-sm":"ant-select-sm","ant-input-group":"ant-input-group","ant-select-search__field":"ant-select-search__field","ant-input-affix-wrapper":"ant-input-affix-wrapper"}},h3zL:function(e,t,n){e.exports={logo:"antd-pro-components-global-header-index-logo",menu:"antd-pro-components-global-header-index-menu",trigger:"antd-pro-components-global-header-index-trigger",rightBox:"antd-pro-components-global-header-index-rightBox",right:"antd-pro-components-global-header-index-right",action:"antd-pro-components-global-header-index-action",search:"antd-pro-components-global-header-index-search",account:"antd-pro-components-global-header-index-account",avatar:"antd-pro-components-global-header-index-avatar",dark:"antd-pro-components-global-header-index-dark",name:"antd-pro-components-global-header-index-name"}},maEh:function(e,t,n){"use strict";n.r(t);var r=n("jehZ"),a=n.n(r),o=n("p0pE"),l=n.n(o),c=n("2Taf"),i=n.n(c),s=n("vZ4D"),u=n.n(s),p=n("l4Ni"),d=n.n(p),f=n("ujKo"),h=n.n(f),m=n("MhPg"),y=n.n(m),g=(n("5Dmo"),n("3S7+")),b=(n("Pwec"),n("CtXQ")),v=n("q1tI"),E=n.n(v),w=n("Y2fQ"),O=(n("cIOH"),n("O/iA"),n("OaEy"),n("5NDa"),n("LdHM")),S=n("TSYQ"),C=n.n(S);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var N=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=_(this,j(t).apply(this,arguments))).saveRef=function(t){var n=e.props.children.ref;"function"==typeof n&&n(t)},e}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(t,v["Component"]),n=t,(r=[{key:"render",value:function(){return v.cloneElement(this.props.children,P(P({},this.props),{ref:this.saveRef}),null)}}])&&x(n.prototype,r),a&&x(n,a),t}(),I=n("5rEg"),D=n("2fM7"),R=n("wEI+");function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var K=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=V(this,B(t).apply(this,arguments))).saveSelect=function(t){e.select=t},e.getInputElement=function(){var t=e.props.children,n=t&&v.isValidElement(t)&&t.type!==O.Option?v.Children.only(e.props.children):v.createElement(I.a,null),r=F({},n.props);return delete r.children,v.createElement(N,r,n)},e.renderAutoComplete=function(t){var n,r,a,o=t.getPrefixCls,l=e.props,c=l.prefixCls,i=l.size,s=l.className,u=void 0===s?"":s,p=l.notFoundContent,d=l.optionLabelProp,f=l.dataSource,h=l.children,m=o("select",c),y=C()((T(n={},"".concat(m,"-lg"),"large"===i),T(n,"".concat(m,"-sm"),"small"===i),T(n,u,!!u),T(n,"".concat(m,"-show-search"),!0),T(n,"".concat(m,"-auto-complete"),!0),n)),g=v.Children.toArray(h);return r=g.length&&((a=g[0])&&a.type&&(a.type.isSelectOption||a.type.isSelectOptGroup))?h:f?f.map(function(e){if(v.isValidElement(e))return e;switch(A(e)){case"string":return v.createElement(O.Option,{key:e},e);case"object":return v.createElement(O.Option,{key:e.value},e.text);default:throw new Error("AutoComplete[dataSource] only supports type `string[] | Object[]`.")}}):[],v.createElement(D.a,F({},e.props,{className:y,mode:D.a.SECRET_COMBOBOX_MODE_DO_NOT_USE,optionLabelProp:d,getInputElement:e.getInputElement,notFoundContent:p,ref:e.saveSelect}),r)},e}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(t,v["Component"]),n=t,(r=[{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"render",value:function(){return v.createElement(R.a,null,this.renderAutoComplete)}}])&&L(n.prototype,r),a&&L(n,a),t}();K.Option=O.Option,K.OptGroup=O.OptGroup,K.defaultProps={transitionName:"slide-up",optionLabelProp:"children",choiceTransitionName:"zoom",showSearch:!1,filterOption:!1};var q=n("eHn4"),U=n.n(q),Y=n("Y/ft"),G=n.n(Y),J=n("sEfC"),X=n.n(J),Z=n("G3lK"),z=n.n(Z);((function(e){function t(e){var n;return i()(this,t),(n=d()(this,h()(t).call(this,e))).timeout=null,n.inputRef=null,n.onKeyDown=function(e){if("Enter"===e.key){var t=n.props.onPressEnter,r=n.state.value;n.timeout=setTimeout(function(){t(r)},0)}},n.onChange=function(e){var t=n.props,r=t.onSearch,a=t.onChange;n.setState({value:e}),r&&r(e),a&&a(e)},n.enterSearchMode=function(){(0,n.props.onVisibleChange)(!0),n.setState({searchMode:!0},function(){n.state.searchMode&&n.inputRef&&n.inputRef.focus()})},n.leaveSearchMode=function(){n.setState({searchMode:!1,value:""})},n.debouncePressEnter=function(){(0,n.props.onPressEnter)(n.state.value)},n.state={searchMode:e.defaultOpen,value:""},n.debouncePressEnter=X()(n.debouncePressEnter,500,{leading:!0,trailing:!1}),n}return y()(t,e),u()(t,null,[{key:"getDerivedStateFromProps",value:function(e){return"open"in e?{searchMode:e.open}:null}}]),u()(t,[{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.placeholder,o=(t.open,G()(t,["className","placeholder","open"])),l=this.state,c=l.searchMode,i=l.value;delete o.defaultOpen;var s=C()(z.a.input,U()({},z.a.show,c));return E.a.createElement("span",{className:C()(n,z.a.headerSearch),onClick:this.enterSearchMode,onTransitionEnd:function(t){"width"!==t.propertyName||c||(0,e.props.onVisibleChange)(c)}},E.a.createElement(b.a,{type:"search",key:"Icon"}),E.a.createElement(K,a()({key:"AutoComplete"},o,{className:s,value:i,onChange:this.onChange}),E.a.createElement(I.a,{ref:function(t){e.inputRef=t},"aria-label":r,placeholder:r,onKeyDown:this.onKeyDown,onBlur:this.leaveSearchMode})))}}]),t})(v.Component)).defaultProps={defaultActiveFirstOption:!1,onPressEnter:function(){},onSearch:function(){},onChange:function(){},className:"",placeholder:"",dataSource:[],defaultOpen:!1,onVisibleChange:function(){}};n("2n1B");var Q=n("h3zL"),W=n.n(Q),$=(n("lUTK"),n("BvKs")),ee=n("d6i3"),te=n.n(ee),ne=(n("miYZ"),n("tsqr")),re=n("1l/V"),ae=n.n(re),oe=n("MuoO"),le=n("3a4m"),ce=n.n(le),ie=n("6Wvd"),se=n("jHYr"),ue=n.n(se),pe=(n("2qtc"),n("kLXV")),de=(n("y8nQ"),n("Vl3Y")),fe=(n("XfOM"),de.a.Item),he={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}}},me=function(e){function t(e){var n;return i()(this,t),(n=d()(this,h()(t).call(this,e))).onSubmit=function(e){var t=n.props.handleOk;e.preventDefault(),n.props.form.validateFieldsAndScroll(function(e,n){if(!e){if(n.password!==n.confirmPassword)return void ne.a.error("两次新密码不一致");t(n)}})},n.state={},n}return y()(t,e),u()(t,[{key:"componentDidMount",value:function(){}},{key:"renderForm",value:function(){var e=this.props.form.getFieldDecorator;return E.a.createElement(de.a,a()({},he,{onSubmit:this.onSubmit}),E.a.createElement(fe,{label:"旧密码"},e("originPassword",{initialValue:void 0,rules:[{required:!0,message:"请输入旧密码",pattern:/^\S*$/}]})(E.a.createElement(I.a.Password,{placeholder:"请输入旧密码"}))),E.a.createElement(fe,{label:"新密码"},e("password",{initialValue:void 0,rules:[{required:!0,message:"请输入新密码"}]})(E.a.createElement(I.a.Password,{placeholder:"请输入新密码"}))),E.a.createElement(fe,{label:"确认密码"},e("confirmPassword",{initialValue:void 0,rules:[{required:!0,message:"请确认新密码(不含空格)",pattern:/^\S*$/}]})(E.a.createElement(I.a.Password,{placeholder:"请确认新密码"}))))}},{key:"render",value:function(){var e=this.props,t=e.visible,n=(e.handleOk,e.handleCancel);return E.a.createElement(pe.a,{title:"修改密码",visible:t,onOk:this.onSubmit,onCancel:n},this.renderForm())}}]),t}(E.a.Component),ye=de.a.create()(Object(oe.connect)(function(e){return ue()(e),{}})(me)),ge=n("a/Iw"),be=function(e){function t(e){var n;return i()(this,t),(n=d()(this,h()(t).call(this,e))).onMenuClick=function(e){var t=e.key;if("logout"!==t)"editPassword"!==t?ce.a.push("/account/".concat(t)):n.setState({showEditPassword:!0});else{var r=n.props.dispatch;r&&r({type:"login/logout"})}},n.handleOk=function(){var e=ae()(te.a.mark(function e(t){var r,a;return te.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props.dispatch,e.next=3,ge.a.modifyPassword(t);case 3:(a=e.sent)&&"1"==a.code&&(ne.a.success("修改成功"),r({type:"login/logout"}));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.handleCancel=function(){n.setState({showEditPassword:!1})},n.state={showEditPassword:!1},n}return y()(t,e),u()(t,[{key:"render",value:function(){this.props.menu;var e=this.state.showEditPassword,t=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):{},n=E.a.createElement($.a,{className:W.a.menu,selectedKeys:[],onClick:this.onMenuClick},E.a.createElement($.a.Item,{key:"editPassword"},E.a.createElement(b.a,{type:"lock"}),E.a.createElement("span",null,"修改密码")),E.a.createElement($.a.Divider,null),E.a.createElement($.a.Item,{key:"logout"},E.a.createElement(b.a,{type:"logout"}),E.a.createElement(w.FormattedMessage,{id:"menu.account.logout",defaultMessage:"logout"})));return E.a.createElement(v.Fragment,null,E.a.createElement(ie.a,{overlay:n},E.a.createElement("span",{className:"".concat(W.a.action," ").concat(W.a.account)},E.a.createElement("span",{className:W.a.name},t.realName?t.realName:"欢迎"),E.a.createElement(b.a,{type:"down"}))),e&&E.a.createElement(ye,{visible:e,handleOk:this.handleOk,handleCancel:this.handleCancel}))}}]),t}(E.a.Component),ve=Object(oe.connect)(function(e){return{currentUser:e.user.currentUser}})(be),Ee=function(e){function t(){return i()(this,t),d()(this,h()(t).apply(this,arguments))}return y()(t,e),u()(t,[{key:"render",value:function(){var e=this.props,t=e.theme,n=e.layout,r=W.a.right;return"dark"===t&&"topmenu"===n&&(r="".concat(W.a.right,"  ").concat(W.a.dark)),E.a.createElement("div",{className:W.a.rightBox},E.a.createElement("div",null),E.a.createElement("div",{className:r},E.a.createElement(g.a,{title:Object(w.formatMessage)({id:"component.globalHeader.help"})},E.a.createElement("a",{target:"_blank",href:"https://github.com/ata-cloud/ata-cloud-service/blob/master/docs/index.md",rel:"noopener noreferrer",className:W.a.action},E.a.createElement(b.a,{type:"question-circle-o"}))),E.a.createElement(ve,null)))}}]),t}(v.Component),we=Object(oe.connect)(function(e){var t=e.settings;return{theme:t.navTheme,layout:t.layout}})(Ee),Oe=n("XcaZ"),Se=n.n(Oe),Ce=n("HZnN"),ke=n("+n12"),Pe=n("y1Nh"),xe=n("wY1l"),_e=n.n(xe),je=function(e){function t(e){var n;return i()(this,t),(n=d()(this,h()(t).call(this,e))).onFetchUserAll=function(){(0,n.props.dispatch)({type:"auth/userAll",payload:{}})},n.onHome=function(){ce.a.push("/service")},n.formatter=function(e){return e&&e.length&&e.map(function(e){var t;return t=l()({},e,{icon:null,children:e.childrenMenu?formatter(e.childrenMenu):[]}),Ce.a.check(e.authority,t,null)})},n.footerRender=function(e,t){if(Object(ke.g)())return E.a.createElement(E.a.Fragment,null,E.a.createElement("div",{style:{padding:"0px 24px 24px",textAlign:"center"}},E.a.createElement("a",{href:"https://www.netlify.com",target:"_blank"},E.a.createElement("img",{src:"https://www.netlify.com/img/global/badges/netlify-color-bg.svg",width:"82px",alt:"netlify logo"}))))},n.menuDataRender=function(){var e=n.state.menu;return n.formatter(e)||[]},n.handleMenuCollapse=function(e){var t=n.props.dispatch;if(t)return t({type:"global/changeLayoutCollapsed",payload:e})},n.state={menu:[]},n}return y()(t,e),u()(t,[{key:"componentDidMount",value:function(){this.props.dispatch;(localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):{}).userId||ce.a.replace("/user");var e=localStorage.getItem("menuList")?JSON.parse(localStorage.getItem("menuList")):[];this.setState({menu:e}),this.onFetchUserAll()}},{key:"render",value:function(){var e=this.props,t=(e.dispatch,e.children),n=e.settings;return E.a.createElement(Pe.BasicLayout,a()({logo:E.a.createElement("img",{src:Se.a,onClick:this.onHome}),fixedHeader:!0,onCollapse:this.handleMenuCollapse,menuItemRender:function(e,t){return E.a.createElement(_e.a,{to:e.path},t)},footerRender:this.footerRender,menuDataRender:this.menuDataRender,formatMessage:w.formatMessage,rightContentRender:function(e){return E.a.createElement(we,e)}},this.props,n),t)}}]),t}(E.a.Component);t.default=Object(oe.connect)(function(e){var t=e.global,n=e.settings,r=e.auth;return{collapsed:t.collapsed,settings:n,userAll:r.userAll}})(je)}}]);